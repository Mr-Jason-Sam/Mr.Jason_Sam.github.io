# Dorri和Novo两人的论文对比


## 前言

两篇比对的论文分别是：

Ali Dorri.  Blockchain in Internet of Things:Challenges and Solutions

Oscar Novo. Blockchain Meets IoT:An Architecture for Scalable Access Management in IoT

对比的方向主要有：背景、架构、访问控制的实现方式、安全和隐私、性能。

## 背景

两者的研究背景是相同的，包括

1. 物联网设备会生成、处理和交换大量安全相关的数据和隐私敏感的信息，易受网络攻击
2. 现有物联网设备朝着能耗低、重量轻的方向发展，其能量和计算资源用于执行核心程序，少有配给处理安全和隐私问题
3. 传统的解决安全与隐私问题的结构是集中式的，无法应对分布式的大规模物联网设备以及巨大的流量，还面临单点瓶颈和故障问题，并且往往代价较高，不适用于物联网

在方案设计中也面临相同的挑战：

1. 求解PoW难题的高资源需求
2. 由广播交易和块到整个网络造成的交易确认的长延迟和低可扩展性

## 架构

Ali Dorri设计的架构由smart home, overlay network, cloud storage三部分组成

![Ali的方案架构](https://picped-1301226557.cos.ap-beijing.myqcloud.com/54513845-8c0a0d80-4993-11e9-92f6-ea1029425358.png)

Oscar Novo设计的架构由区块链网络，Management Hub，无线传感器网络三部分组成

![去中心化的访问控制系统](https://ieeexplore.ieee.org/mediastore_new/IEEE/content/media/6488907/8334665/8306880/novo2-2812239-small.gif)

我们在下表中对两个架构的各方面进行对比，但首先声明一些基本内容：

1. Ali自己设计了区块链，Oscar使用以太坊
2. Ali的方案中一共涉及三种区块链，其中Shared BC是一个人管理多个智能家庭的特殊情况，以下比较不考虑（BC是Blockchain的简称）
3. Ali方案中的Local BC实际上只是用了区块链的结构，但本身是集中式的，只有一个或少数几个高资源设备维持链
4. 两人的方案中，普通的有资源限制的物联网设备都不参与BC

| 比较的方面                  | Oscar                                               | Ali:Local BC                            | Ali:Overlay BC                                               |
| --------------------------- | --------------------------------------------------- | --------------------------------------- | ------------------------------------------------------------ |
| 区块链可见性                | 论文中的验证实现是Private，但方案的最终目标是Public | Private                                 | Public                                                       |
| BC参与者                    | Manager，以及其它的以太坊BC节点                     | 一个或少数几个高资源设备                | 智能家庭miner，智能家庭的其它高资源设备，用户的智能手机或个人电脑 |
| 共识机制                    | PoW                                                 | 无                                      | 无                                                           |
| 涉及的交易类型              | 设备注册，访问控制策略定义与修改                    | store, access, monitor, remove, genesis | access, store, genesis                                       |
| 存储方式                    | 未提及，猜测是传统的集中式                          | 集中式（Local storage）                 | 集中式（cloud storage）                                      |
| BC是否保存IoT设备产生的数据 | 否                                                  | 是，但非实时                            | 是，但非实时                                                 |
| 访问控制实现方式            | 智能合约                                            | 策略头                                  | 请求者，被请求者和转发三个公钥列表                           |
| 权限查询和执行              | management hub从最近的区块链节点查询并执行          | miner从策略头查询并执行                 | CH进行公钥匹配，并执行                                       |
| IoT设备识别                 | 公钥                                                | 设备ID                                  | 公钥                                                         |
| 对BC的控制权                | 没有人                                              | 智能家庭所有者                          | 没有人                                                       |
| 对miner/CH/manager的信任    | 信任级别相同                                        | 信任级别相同                            | 信用有等级                                                   |
| 如何选择miner/CH/manager    | 自选                                                | 屋主选择                                | 簇中节点选举                                                 |
| 激励机制                    | 有                                                  | 无                                      |                                                              |

## 访问控制的实现

Ali Dorri的方案中，访问控制机制的核心是Local BC中的策略头（policy header），权限由智能家庭的主人直接定义在策略头中，交易发生之前先由miner在策略头中查询是否拥有权限，再执行。Overlay BC中因为有cluster和cluster header，维持着三个公钥列表，执行着一部分的权限控制。

Oscar Novo的方案中，权限定义在智能合约里，由manager与智能合约交互完成权限的定义与修改，由management hub与BC任意节点交互完成权限的查询和执行

## 安全

首先分析对安全和隐私的需求是否得到实现以及如何实现。关于信息安全框架，国外主要从机密性、完整性和可用性三方面分析，国内从内容安全、数据安全、运行安全和实体安全四层分析。Ali的论文中是前者。

| 需求     | Ali如何保证                         | Oscar如何保证                                                |
| -------- | ----------------------------------- | ------------------------------------------------------------ |
| 机密性   | 通过对称加密实现                    | 采用CoAP的C语言实现LibCoAP，通过利用tinydtls框架实现安全通信 |
| 完整性   | 通过哈希实现                        | 未采用相关机制保证                                           |
| 可用性   | 通过限制设备和miner可接受的交易实现 | 通过CH维持的三个公钥列表过滤交易                             |
| 用户控制 | 通过在本地BC中记录交易实现          | 通过manager与智能合约交互定义和修改权限实现                  |
| 身份鉴别 | 通过使用策略头和共享密钥实现        | manager和manager管理下的IoT设备都需要再区块链中注册          |

然后分析两方案对各种常见的攻击是否能有效应对。

|             | Ali                                                          | Oscar                                                        |
| ----------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Sybil       | 一个智能家庭内的设备有自己的设备ID                           | manager和IoT设备都要注册，且IoT设备由公钥唯一识别            |
| spoofing    | 访问权限是由屋主直接定义的，如果家里的设备被屋主信任，那么不会出现欺骗，如果不被信任，不会授予权限，唯一的问题是屋主要手动定义权限 | manager和IoT设备都会进行注册，但智能合约的地址以及management hub要寻找最近的区块链节点的地址，这两种地址可能不可靠，带来的后果也很严重。 |
| tampering   | 覆盖网络中的交易是签名的，                                   | 访问权限是不可篡改的，由区块链保证，但IoT设备提供的数据难说  |
| DDoS        | 首先，攻击者不可能直接在智能家居设备上安装恶意软件，因为所有的交易都由miner检查，所有的设备都无法直接访问。其次，假设设备被感染，称为恶意节点，由于所有传入传出的请求都由miner通过检查策略头授权，构成DDoS攻击流量的请求是不会被授权的CH会匹配公钥，从而阻止这种攻击，但使用不同的公钥，这种攻击有可能达成 | 可能                                                         |
| repudiation | 会达成，但会被发现，从而簇中节点重新选举CH                   | 可能，management hub是否执行策略，区块链无法检查             |

## 隐私

Ali为了防止Linking攻击，允许用户将任意交易发到覆盖网络，并且每个交易的ID和公钥都可变。

Oscar的方案区块链和物联网是分离的，没谈论隐私的问题

## 性能

Ali Dorri的方案中，区块链不存储传感器数据。作者通过使用Cooja仿真器仿真智能家居场景，和没有使用加密，哈希和区块链的场景做对比，结果如下，虽然引入了额外的开销，但作者认为相比于该方案带来的安全性和隐私性，额外引入的这些开销是可以接受的。

1. Packet 开销：多一个策略头，比原本的大
2. 时间开销：由于额外的加密和哈希操作，需要更多的时间，但引入的额外时间最多不超过20ms，可以接受。
3. 能量开销：能耗几乎增加了一倍。

Oscar Novo的方案中，区块链也不存储数据，而是只存储访问策略，所以处理实时数据和非实时数据没有区别，因为权限都能实时查询到，基本没有延迟。在实验仿真中，考虑不同数量的并发客户端（management hub或IoT 设备）每秒请求数及消息数的变化，该方案能支持大量的并发请求，满足物联网的需要。


